---
title: "TÃ½Å¾deÅˆ 5: NaÄÃ­tanie dÃ¡t do R"
author: "Tvoje meno"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    toc_depth: 3
    code_folding: show
    theme: united
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  warning = FALSE,
  message = FALSE,
  comment = "#>"
)
```

# Ãšvod

Toto cviÄenie sa venuje naÄÃ­tavaniu dÃ¡t do R z rÃ´znych formÃ¡tov sÃºborov. NauÄÃ­me sa pracovaÅ¥ s:

- **BinÃ¡rne R formÃ¡ty** (.RData, .rds)
- **TextovÃ© formÃ¡ty** (CSV, TSV)
- **Excel sÃºbory** (.xls, .xlsx)
- **KomprimovanÃ© sÃºbory** (.gz)
- **Å tatistickÃ© formÃ¡ty** (SPSS .sav)

## PrehÄ¾ad cviÄenia

### ğŸ“š ÄŒasÅ¥ 1: Na zahriatie
- NaÄÃ­tanie dÃ¡t z balÃ­ka ggplot2

### ğŸ“Š ÄŒasÅ¥ 2: Eurostat HDP dÃ¡ta
- **Ãšloha 1**: .RData formÃ¡t
- **Ãšloha 2**: .csv formÃ¡t
- **Ãšloha 3**: .tsv.gz formÃ¡t (6 rÃ´znych prÃ­stupov!)
- **Ãšloha 4**: .xls formÃ¡t (s/bez poznÃ¡mok)
- **Bonus**: Priame naÄÃ­tanie z Eurostat API

### âš ï¸ ÄŒasÅ¥ 3: Murphy - RieÅ¡enie problÃ©mov
- **Ãšloha 1**: PreskÃºmanie surovÃ©ho sÃºboru
- **Ãšloha 2**: SÃºbor s hlaviÄkou a Å¡pecifickÃ½m oddeÄ¾ovaÄom
- **Ãšloha 3**: SÃºbor bez hlaviÄky
- **Ãšloha 4**: ProblÃ©my s kÃ³dovanÃ­m (ISO-8859-2)
- **Ãšloha 5**: Kontrola integrity dÃ¡t

### ğŸ’¾ ÄŒasÅ¥ 4: Ukladanie dÃ¡t
- **Ãšloha 1**: Ukladanie do .RData
- **Ãšloha 2**: Ukladanie do .csv (pozor na trick!)

### ğŸ¯ ÄŒasÅ¥ 5: RDS formÃ¡t
- **Ãšloha 1**: Ukladanie jednÃ©ho objektu
- **Ãšloha 2**: Ukladanie viacerÃ½ch objektov (cez list)

### ğŸª„ ÄŒasÅ¥ 6: ÄŒierna mÃ¡gia
- **Ãšloha 1**: NaÄÃ­tanie SPSS sÃºboru
- **Ãšloha 2**: PrÃ¡ca s labelmi (zap_labels, as_factor)

---

**DÃ´leÅ¾itÃ© poznÃ¡mky:**

- Funkcie `read_xxx()` z balÃ­ka **readr** vracajÃº tabuÄ¾ku triedy `tibble`
- ZÃ¡kladnou funkciou je `read_delim()`, ostatnÃ© sÃº jej Å¡peciÃ¡lne prÃ­pady
- VÅ¾dy si najprv pozri surovÃ½ obsah sÃºboru pomocou `read_lines()`

```{r cistime-prostredie}
# VyÄistenie prostredia
rm(list = ls())
```

---

# Na zahriatie

## Ãšloha 1: NaÄÃ­tanie dÃ¡t z balÃ­ka

**Zadanie:** NaÄÃ­taj z balÃ­ka **ggplot2** tabulku `txhousing` a vypiÅ¡ niekoÄ¾ko prvÃ½ch jeho riadkov. AkÃ½ typ (triedu) mÃ¡ tÃ¡to tabuÄ¾ka?

### RieÅ¡enie

```{r nacitanie-txhousing}
library(ggplot2)

# SpÃ´sob 1: Lazy load - tabuÄ¾ka sa naÄÃ­ta aÅ¾ pri prvom pouÅ¾itÃ­
txhousing

# SpÃ´sob 2: ExplicitnÃ© zadanie balÃ­ka pomocou ::
ggplot2::txhousing

# SpÃ´sob 3: NaÄÃ­tanie do environment
# POZOR: MÃ´Å¾e prepÃ­saÅ¥ existujÃºcu premennÃº v environment!
data("txhousing", package = "ggplot2")

# Zistenie triedy objektu
class(txhousing)

# Zobrazenie prvÃ½ch riadkov
head(txhousing)
```

**PoznÃ¡mky:**

- `txhousing` je dÃ¡tovÃ¡ sada obsahujÃºca informÃ¡cie o predaji nehnuteÄ¾nostÃ­ v Texase
- Trieda: `tbl_df`, `tbl`, `data.frame` (tibble - modernÃ¡ verzia data frame)
- **Lazy load** znamenÃ¡, Å¾e dÃ¡ta sa naÄÃ­tajÃº aÅ¾ keÄ ich skutoÄne pouÅ¾ijeme

---

# Gross Domestic Product at Market Prices

Pracujeme s dÃ¡tami z Eurostatu s kÃ³dom `tec00001` - HDP v trhovÃ½ch cenÃ¡ch.

**Zdroj:** http://ec.europa.eu/eurostat/tgm/table.do?tab=table&init=1&language=en&pcode=tec00001&plugin=1

---

## Ãšloha 1: NaÄÃ­tanie z binÃ¡rneho R formÃ¡tu (.RData)

**Zadanie:** NaÄÃ­taj dÃ¡ta z binÃ¡rneho R formÃ¡tu. SÃºbor sa volÃ¡ "tec00001.RData". Obsahuje tabuÄ¾ku `tec00001`.

### RieÅ¡enie

```{r nacitanie-rdata}
# NaÄÃ­tanie .RData sÃºboru
load('tec00001.RData')

# Pozor: to sÃº TIDY DATA - kÄ¾ÃºÄom sÃº prvÃ© dva stÄºpce
head(tec00001)
```

**PoznÃ¡mky k TIDY DATA:**

- KaÅ¾dÃ¡ premennÃ¡ tvorÃ­ stÄºpec
- KaÅ¾dÃ© pozorovanie tvorÃ­ riadok
- KaÅ¾dÃ½ typ pozorovacej jednotky tvorÃ­ tabuÄ¾ku
- V tomto prÃ­pade sÃº kÄ¾ÃºÄovÃ© prvÃ© dva stÄºpce (na_item, unit, geo)

---

## Ãšloha 2: NaÄÃ­tanie z CSV sÃºboru

**Zadanie:** NaÄÃ­taj rovnakÃº tabuÄ¾ku zo sÃºboru "tec00001.csv". TabuÄ¾ku pomenuj `tec00001csv`.

### RieÅ¡enie

```{r nacitanie-csv}
library(readr)

# NaÄÃ­tanie CSV s explicitnÃ½m definovanÃ­m typov stÄºpcov
tec00001csv <- read_csv(
  "tec00001.csv", 
  col_types = cols(
    na_item = col_character(),
    unit = col_character(),
    geo = col_character(),
    time = col_date(format = "%Y-%m-%d"),
    values = col_double()
  )
)

tec00001csv
```

**PoznÃ¡mky:**

- `read_csv()` je funkcia z balÃ­ka **readr** (nie base R funkcia `read.csv`)
- ExplicitnÃ© definovanie typov stÄºpcov pomocou `col_types` zabezpeÄuje sprÃ¡vne naÄÃ­tanie
- `col_character()` - textovÃ½ stÄºpec
- `col_date()` - dÃ¡tum s definovanÃ½m formÃ¡tom
- `col_double()` - desatinnÃ© ÄÃ­slo

---

## Ãšloha 3: NaÄÃ­tanie z TSV sÃºboru (komprimovanÃ©ho)

**Zadanie:** NaÄÃ­taj rovnakÃº tabuÄ¾ku zo sÃºboru "tec00001.tsv.gz". TabuÄ¾ku pomenuj `tec00001tsv`. Ako sa tÃ¡to tabuÄ¾ka lÃ­Å¡i od tabuÄ¾ky `tec00001csv`? (Tento sÃºbor je priamo stiahnutÃ½ z Eurostatu.)

### RieÅ¡enie - pokus 1 (ZLYHÃ!)

```{r nacitanie-tsv-zle, eval=FALSE}
# POZOR: Toto naÄÃ­ta defaultne, ale ZLE!
tec00001tsv <- read_csv("tec00001.tsv.gz")
tec00001tsv
```

**PreÄo to nefunguje?**

- `read_csv()` oÄakÃ¡va Äiarku ako oddeÄ¾ovaÄ
- TSV (Tab-Separated Values) pouÅ¾Ã­va tabulÃ¡tor `\t`

### RieÅ¡enie - pokus 2 (LEPÅ IE)

```{r nacitanie-tsv-spravne}
# SprÃ¡vne naÄÃ­tanie TSV s definovanÃ­m typov
tec00001tsv <- read_tsv(
  "tec00001.tsv.gz",
  col_types = "cnnnnnnnnnnnn",  # c = character, n = number
  na = ":"  # NedefinovanÃ¡ hodnota v Eurostatu je ":"
)

tec00001tsv
```

**Vysvetlenie formÃ¡tu `col_types`:**

- `"cnnnnnnnnnnnn"` = prvÃ½ stÄºpec je character, zvyÅ¡ok sÃº numbers
- AlternatÃ­vne moÅ¾no pouÅ¾iÅ¥ `cols()` ako pri CSV

### RieÅ¡enie - pokus 3 (pomocou GUI)

```{r nacitanie-tsv-gui, eval=FALSE}
# NaÄÃ­tanie pomocou dialogovÃ©ho okna v RStudio
tec00001tsv <- read_delim(
  "tec00001.tsv.gz", 
  delim = "\t",  # TabulÃ¡tor ako oddeÄ¾ovaÄ
  escape_double = FALSE, 
  col_types = cols(`2007` = col_number()),  # Rok 2007 je ÄÃ­slo
  trim_ws = TRUE  # OdstrÃ¡nenie medzier na zaÄiatku/konci
)

# Kontrola problÃ©mov pri naÄÃ­tanÃ­
problems(tec00001tsv)
```

### RieÅ¡enie - pokus 4 (vÅ¡etky stÄºpce ako text)

```{r nacitanie-tsv-text}
# NaÄÃ­tanie vÅ¡etkÃ½ch stÄºpcov ako text
tec00001tsv <- read_tsv(
  "tec00001.tsv.gz",
  col_types = cols(.default = col_character()),
  na = ':'  # NedefinovanÃ¡ hodnota je :
)

head(tec00001tsv)
```

### RieÅ¡enie - pokus 5 (defaultne ÄÃ­sla, prvÃ½ stÄºpec text)

```{r nacitanie-tsv-cisla, eval=FALSE}
# POZOR: StratÃ­me poznÃ¡mky pri ÄÃ­slach!
tec00001tsv <- read_tsv(
  "tec00001.tsv.gz",
  col_types = cols(
    .default = col_number(),
    `na_item,unit,geo\\time` = col_character()
  ),
  na = ":"
)

tec00001tsv
```

**ProblÃ©m:** Pri tomto prÃ­stupe stratÃ­me prÃ­padnÃ© poznÃ¡mky/flagy pri ÄÃ­slach.

### RieÅ¡enie - pokus 6 (NAJLEPÅ IE - s oddelenÃ­m poznÃ¡mok)

```{r nacitanie-tsv-separate, eval=FALSE}
# NajlepÅ¡Ã­ prÃ­stup: naÄÃ­taÅ¥ vÅ¡etko ako text a potom rozdeliÅ¥
# PouÅ¾Ã­va balÃ­k tidyr a regulÃ¡rne vÃ½razy
library(tidyr)

tec00001tsv <- read_tsv(
  "tec00001.tsv.gz",
  col_types = cols(.default = col_character()),
  na = ":"
) |>
  separate_wider_regex(
    -1,  # Aplikuj na vÅ¡etky stÄºpce okrem prvÃ©ho
    patterns = c(
      year = "[^\\s]*",  # Rok (vÅ¡etko okrem medzery)
      "\\s+",            # Medzera(y)
      note = ".*"        # PoznÃ¡mka (zvyÅ¡ok)
    ),
    names_sep = "_",
    too_few = "align_start"
  )

tec00001tsv
```

**Vysvetlenie `separate_wider_regex()`:**

- RozdeÄ¾uje text pomocou regulÃ¡rnych vÃ½razov
- `[^\\s]*` = vÅ¡etko okrem medzery (hodnota roku)
- `\\s+` = jedna alebo viac medzier
- `.*` = zvyÅ¡ok riadku (poznÃ¡mka/flag)
- `names_sep = "_"` = nÃ¡zvy novÃ½ch stÄºpcov oddeÄ¾ podÄiarkovnÃ­kom

---

## Ãšloha 4: NaÄÃ­tanie z Excel sÃºboru

**Zadanie:** NaÄÃ­taj rovnakÃº tabuÄ¾ku zo sÃºboru "Eurostat_Table_tec00001FlagDesc_11c465e3-eae1-4c8e-b956-f473d4a78a0a.xls". TabuÄ¾ku pomenuj `tec00001xls`. Ako sa tabuÄ¾ka `tec00001xls` lÃ­Å¡i od tabuliek `tec00001csv` a `tec00001tsv`?

### RieÅ¡enie - bez poznÃ¡mok

```{r nacitanie-excel-bez-poznamok}
library(readxl)

filename <- "Eurostat_Table_tec00001FlagDesc_11c465e3-eae1-4c8e-b956-f473d4a78a0a.xls"

# NaÄÃ­tanie bez poznÃ¡mok (ztratÃ­me flagy)
tec00001xls <- read_excel(
  filename,
  range = "A4:Y47",  # KonkrÃ©tny rozsah buniek
  na = ":",          # NedefinovanÃ¡ hodnota
  col_types = c("text", rep(c("numeric", "skip"), 12))
)

tec00001xls
```

**Vysvetlenie parametrov:**

- `range = "A4:Y47"` - naÄÃ­taj len bunky od A4 po Y47 (preskoÄÃ­me hlaviÄku)
- `rep(c("numeric", "skip"), 12)` - opakuj 12x: ÄÃ­slo, preskoÄ
  - ZnamenÃ¡: text, ÄÃ­slo, preskoÄ, ÄÃ­slo, preskoÄ, ... (12 rokov)

### RieÅ¡enie - so zachovanÃ­m poznÃ¡mok

```{r nacitanie-excel-s-poznamkami}
# To istÃ©, ale zachovÃ¡me poznÃ¡mky
# Len zmenÃ­me "skip" na "text"
tec00001xls <- read_excel(
  filename,
  range = "A4:Y47",
  na = ":",
  col_types = c("text", rep(c("numeric", "text"), 12))
)

tec00001xls
```

**Rozdiel:**

- `rep(c("numeric", "skip"), 12)` - ÄÃ­selnÃ© hodnoty, poznÃ¡mky preskoÄÃ­me
- `rep(c("numeric", "text"), 12)` - ÄÃ­selnÃ© hodnoty aj textovÃ© poznÃ¡mky/flagy

---

## PoznÃ¡mka 1: Priame naÄÃ­tanie z Eurostatu

```{r nacitanie-eurostat, eval=FALSE}
# InÅ¡talÃ¡cia balÃ­ka (len raz)
# install.packages("eurostat")

# Priame naÄÃ­tanie z Eurostat API
library(eurostat)
tec00001 <- get_eurostat("tec00001")
tec00001
```

**VÃ½hody:**

- NajnovÅ¡ie dÃ¡ta priamo zo zdroja
- AutomatickÃ© formÃ¡tovanie
- UÅ¾ sÃº v TIDY formÃ¡te

---

# Murphy: ÄŒo sa mÃ´Å¾e pokaziÅ¥...

TÃ¡to ÄasÅ¥ sa venuje problÃ©mom, ktorÃ© mÃ´Å¾u nastaÅ¥ pri naÄÃ­tavanÃ­ reÃ¡lnych dÃ¡t.

---

## Ãšloha 1: PreskÃºmanie surovÃ©ho sÃºboru

**Zadanie:** PouÅ¾i funkciu `read_lines()`, aby si sa pozrel, ako vypadÃ¡ sÃºbor "experiment.csv".

### RieÅ¡enie

```{r read-lines}
filename <- "experiment.csv"

# NaÄÃ­taj obsah sÃºboru ako text
read_lines(filename)

# Zobraz prvÃ½ch 15 riadkov pekne
read_lines(filename) |> 
  head(15) |> 
  cat(sep = "\n")
```

**ÄŒo sme zistili:**

- SÃºbor mÃ¡ hlaviÄku (prvÃ½ch 8 riadkov nie je dÃ¡ta)
- OddeÄ¾ovaÄ je dvojbodka `:`
- DesatinnÃ¡ Äiarka namiesto bodky
- TisÃ­covÃ½ oddeÄ¾ovaÄ je bodka

---

## Ãšloha 2: NaÄÃ­tanie experiment.csv

**Zadanie:** NaÄÃ­taj dÃ¡ta zo sÃºboru "experiment.csv" do premennej `experiment` tak, aby premennÃ¡ `treatment` bola faktor s ÃºrovÅˆami "control", "group A" a "group B".

### RieÅ¡enie

```{r nacitanie-experiment}
library(readr)

experiment <- read_delim(
  "experiment.csv", 
  delim = ":",  # OddeÄ¾ovaÄ je dvojbodka
  escape_double = FALSE, 
  col_types = cols(
    id = col_integer(), 
    height = col_integer(), 
    weight = col_integer(), 
    treatment = col_factor(levels = c("control", "group A", "group B"))
  ), 
  locale = locale(
    decimal_mark = ",",   # DesatinnÃ¡ Äiarka
    grouping_mark = "."   # TisÃ­covÃ½ oddeÄ¾ovaÄ
  ), 
  trim_ws = TRUE,  # OdstrÃ¡Åˆ medzery na zaÄiatku/konci
  skip = 8         # PreskoÄ prvÃ½ch 8 riadkov (hlaviÄka)
)

experiment
```

**KÄ¾ÃºÄovÃ© parametre:**

- `delim = ":"` - Å¡pecifikuje oddeÄ¾ovaÄ
- `skip = 8` - preskoÄÃ­ hlaviÄku sÃºboru
- `locale = locale(...)` - nastavenie formÃ¡tu ÄÃ­sel (desatinnÃ¡ Äiarka!)
- `col_factor(levels = c(...))` - vytvorÃ­ faktor so Å¡pecifikovanÃ½mi ÃºrovÅˆami
- `trim_ws = TRUE` - odstrÃ¡ni biele znaky

---

## Ãšloha 3: NaÄÃ­tanie experiment2.csv

**Zadanie:** NaÄÃ­taj dÃ¡ta zo sÃºboru "experiment2.csv" do premennej `experiment2`.

### RieÅ¡enie - spÃ´sob 1 (naÄÃ­taj, potom premenuj)

```{r nacitanie-experiment2-sposob1}
library(readr)

# Najprv naÄÃ­tame bez nÃ¡zvov stÄºpcov
experiment2 <- read_delim(
  "experiment2.csv", 
  delim = ":",
  escape_double = FALSE,
  col_names = FALSE,  # SÃºbor nemÃ¡ hlaviÄku!
  col_types = cols(
    X1 = col_integer(),  # RStudio automaticky pomenuje stÄºpce X1, X2, ...
    X5 = col_factor(levels = c("control", "group A", "group B"))
  ), 
  locale = locale(decimal_mark = ",")
)

# Potom premenujeme stÄºpce
colnames(experiment2) <- c("id", "name", "height", "weight", "treatment", "value")

experiment2
```

### RieÅ¡enie - spÃ´sob 2 (vÅ¡etko naraz)

```{r nacitanie-experiment2-sposob2}
# LEPÅ IE: NaÄÃ­taj a pomenuj v jednom kroku
experiment2 <- read_delim(
  "experiment2.csv", 
  delim = ":",
  escape_double = FALSE, 
  col_names = c("id", "name", "height", "weight", "treatment", "value"),
  col_types = cols(
    id = col_integer(),
    name = col_character(),
    height = col_integer(), 
    weight = col_integer(),
    treatment = col_factor(levels = c("control", "group A", "group B")),
    value = col_double()
  ),
  locale = locale(decimal_mark = ",")
)

experiment2
```

**Rozdiel oproti Ãšlohe 2:**

- `col_names = FALSE` alebo `col_names = c(...)` - sÃºbor nemÃ¡ hlaviÄku
- MusÃ­me explicitne zadaÅ¥ nÃ¡zvy stÄºpcov

---

## Ãšloha 4: KÃ³dovanie znakov (encoding)

**Zadanie:** NaÄÃ­taj dÃ¡ta zo sÃºboru "experiment3.csv" do premennej `experiment3`.

**ProblÃ©m:** SÃºbor obsahuje diakritiku (ÄeskÃ©/slovenskÃ© znaky), ale nie je v UTF-8 kÃ³dovanÃ­!

### RieÅ¡enie

```{r nacitanie-experiment3}
library(readr)

# Krok 1: SkÃºs uhÃ¡dnuÅ¥ kÃ³dovanie
kodovanie <- guess_encoding("experiment3.csv")
kodovanie
```

**ÄŒo je `guess_encoding()`?**

- Funkcia z balÃ­ka **readr**
- Analyzuje sÃºbor a odhaduje pravdepodobnÃ© kÃ³dovanie
- Vracia tabuÄ¾ku s moÅ¾nÃ½mi kÃ³dovaniami a ich pravdepodobnosÅ¥ou

```{r nacitanie-experiment3-s-kodovanim}
# Krok 2: NaÄÃ­taj s nastavenÃ½m kÃ³dovanÃ­m
experiment3 <- read_delim(
  "experiment3.csv", 
  delim = ":", 
  escape_double = FALSE, 
  col_types = cols(
    id = col_integer(), 
    height = col_integer(),
    weight = col_integer(), 
    treatment = col_factor(levels = c("control", "group A", "group B")), 
    value = col_double()
  ), 
  locale = locale(
    decimal_mark = ",",
    grouping_mark = ".", 
    encoding = "ISO-8859-2"  # <-- Toto je kÄ¾ÃºÄovÃ©!
  ),
  trim_ws = TRUE, 
  skip = 8
)

experiment3
```

**DÃ´leÅ¾itÃ© poznÃ¡mky k kÃ³dovaniu:**

- **UTF-8** - modernÃ½ Å¡tandard, podporuje vÅ¡etky jazyky
- **ISO-8859-2** (Latin-2) - stredoeurÃ³pske jazyky (ÄeÅ¡tina, slovenÄina, poÄ¾Å¡tina)
- **Windows-1250** - Windows verzia stredoeurÃ³pskeho kÃ³dovania
- NesprÃ¡vne kÃ³dovanie = "krakozyabry" namiesto diakritiky (Ä â†’ Ã„, Å¡ â†’ Ã…Â¡)

### ÄŒastÃ© kÃ³dovania v ÄŒeskej republike a na Slovensku

| KÃ³dovanie | PouÅ¾itie |
|-----------|----------|
| UTF-8 | ModernÃ© sÃºbory, internet, odporÃºÄanÃ© |
| ISO-8859-2 | StarÅ¡ie Linux systÃ©my |
| Windows-1250 | StarÅ¡ie Windows sÃºbory |
| CP852 | StarÃ© DOS sÃºbory |

---

## Ãšloha 5: Kontrola integrity dÃ¡t

**Zadanie:** Skontroluj integritu naÄÃ­tanÃ½ch dÃ¡t v prÃ­pade tabuÄ¾ky `experiment`.

**PreÄo kontrolovaÅ¥?**

- Data sa mohli pokaziÅ¥ pri naÄÃ­tavanÃ­
- MÃ´Å¾u byÅ¥ prÃ­tomnÃ© neoÄakÃ¡vanÃ© hodnoty
- DÃ¡tovÃ© typy nemusia sedieÅ¥

### RieÅ¡enie

```{r kontrola-integrity}
# 1. Kontrola poÄtu riadkov
# PÃ´vodnÃ½ sÃºbor mÃ¡ 351 riadkov, ale 9 je hlaviÄka
# OÄakÃ¡vame: 351 - 9 = 342 riadkov
nrow(experiment)

# 2. Kontrola prvÃ½ch riadkov
# Porovnaj s pÃ´vodnÃ½m sÃºborom - vyzerajÃº dÃ¡ta sprÃ¡vne?
head(experiment)

# 3. Kontrola poslednÃ½ch riadkov  
# NaÄÃ­tali sa vÅ¡etky dÃ¡ta aÅ¾ do konca?
tail(experiment)

# 4. SÃºhrnnÃ© statistiky
# Sleduj minima, maxima a poÄet chÃ½bajÃºcich hodnot (NA's)
summary(experiment)

# 5. Kontrola dÃ¡tovÃ½ch typov
str(experiment)

# 6. Kontrola unikÃ¡tnych hodnÃ´t faktoru
levels(experiment$treatment)
table(experiment$treatment)
```

**Checklist kontroly integrity:**

- âœ… **PoÄet riadkov** - sedÃ­ s oÄakÃ¡vanÃ­m?
- âœ… **PrvÃ© a poslednÃ© riadky** - vyzerajÃº rozumne?
- âœ… **DÃ¡tovÃ© typy** - integer, double, factor?
- âœ… **ChÃ½bajÃºce hodnoty** - sÃº kde majÃº byÅ¥?
- âœ… **Rozsahy hodnÃ´t** - minima/maxima dÃ¡vajÃº zmysel?
- âœ… **Faktory** - sprÃ¡vne Ãºrovne?

### AlternatÃ­vne nÃ¡stroje na kontrolu

**V LibreOffice Calc:**
```
File > Open > Vyberte .csv > Nastavte oddeÄ¾ovaÄ a kÃ³dovanie
```

**Linux prÃ­kazovÃ½ riadok:**
```bash
head experiment.csv      # PrvÃ½ch 10 riadkov
tail experiment.csv      # PoslednÃ½ch 10 riadkov
wc -l experiment.csv     # PoÄet riadkov
less experiment.csv      # Prezeranie celÃ©ho sÃºboru
```

---

# Ukladanie dÃ¡t

Teraz sa nauÄÃ­me ako ukladaÅ¥ dÃ¡ta do rÃ´znych formÃ¡tov.

---

## Ãšloha 1: Ukladanie do .RData formÃ¡tu

**Zadanie:** UloÅ¾ tabuÄ¾ky `txhousing`, `tec00001` a `experiment` do natÃ­vneho binÃ¡rneho sÃºboru `results.RData`. VymaÅ¾ vÅ¡etky premennÃ© z pracovnÃ©ho prostredia R a znovu dÃ¡ta zo sÃºboru `results.RData` naÄÃ­taj.

### RieÅ¡enie

```{r ukladanie-rdata}
# Krok 1: Vytvor cestu k sÃºboru v doÄasnom adresÃ¡ri
# fp = file path
# tempdir() stratÃ­ sa pri reÅ¡tarte/ukonÄenÃ­ R
fp <- file.path(tempdir(), "results.RData")
fp

# Krok 2: UloÅ¾ dÃ¡ta (mÃ´Å¾eÅ¡ uloÅ¾iÅ¥ viacero objektov naraz)
save(txhousing, tec00001, experiment, file = fp)

# Krok 3: VymaÅ¾ vÅ¡etky premennÃ© z prostredia
rm(list = ls())

# ProblÃ©m: fp je tieÅ¾ vymazanÃ½!
# fp  # TÃ¡to premennÃ¡ uÅ¾ neexistuje

# Krok 4: Znovu nastav cestu (lebo sme ju vymazali)
fp <- file.path(tempdir(), "results.RData")
fp

# Krok 5: Znovu naÄÃ­taj dÃ¡ta
# PremennÃ© txhousing, tec00001, experiment sa objavia v environment
load(file = fp)

# Overenie
ls()  # Zobraz vÅ¡etky premennÃ© v environment
```

**DÃ´leÅ¾itÃ© poznÃ¡mky k .RData:**

- âœ… **UloÅ¾Ã­ nÃ¡zvy premennÃ½ch** - `save()` uloÅ¾Ã­ objekty pod ich pÃ´vodnÃ½mi nÃ¡zvami
- âœ… **Viac objektov naraz** - mÃ´Å¾eÅ¡ uloÅ¾iÅ¥ koÄ¾ko chceÅ¡
- âœ… **ZachovÃ¡ dÃ¡tovÃ© typy** - faktory, dÃ¡tumy, vÅ¡etko ostÃ¡va ako bolo
- âŒ **ProblÃ©m** - pri `load()` premennÃ© "preskoÄia" do environment s pevnÃ½mi nÃ¡zvami
- âŒ **Riziko** - mÃ´Å¾e prepÃ­saÅ¥ existujÃºce premennÃ©!

### Kde sa nachÃ¡dzajÃº doÄasnÃ© sÃºbory?

```{r temp-directory}
# Zisti umiestnenie doÄasnÃ©ho adresÃ¡ra
tempdir()

# Zobraz vÅ¡etky sÃºbory v doÄasnom adresÃ¡ri
list.files(tempdir())
```

---

## Ãšloha 2: Ukladanie do CSV formÃ¡tu

**Zadanie:** UloÅ¾ tabuÄ¾ky `txhousing`, `tec00001` a `experiment` do sÃºboru "results.csv" typu CSV.

**POZOR!** Toto je "trik question" - do jednÃ©ho CSV sÃºboru je moÅ¾nÃ© uloÅ¾iÅ¥ len **jednu** tabuÄ¾ku!

### RieÅ¡enie

```{r ukladanie-csv}
# Do jednÃ©ho CSV sÃºboru mÃ´Å¾eme uloÅ¾iÅ¥ len JEDNU tabuÄ¾ku
fp <- file.path(tempdir(), "results.csv")

# UloÅ¾enie jednej tabuÄ¾ky
write_csv(txhousing, fp)

# Overenie - naÄÃ­tanie spÃ¤Å¥
txhousing_loaded <- read_csv(fp)
head(txhousing_loaded)
```

**PoznÃ¡mky k `write_csv()`:**

- âœ… **JednoduchÃ½ formÃ¡t** - Ä¾ahko sa otvorÃ­ v Exceli, LibreOffice
- âœ… **ÄŒitateÄ¾nÃ½ Älovekom** - mÃ´Å¾eÅ¡ ho otvoriÅ¥ v textovom editore
- âŒ **Len jedna tabuÄ¾ka** - nemÃ´Å¾eÅ¡ uloÅ¾iÅ¥ viac tabuliek naraz
- âŒ **StrÃ¡ca dÃ¡tovÃ© typy** - faktory, dÃ¡tumy treba znovu definovaÅ¥ pri naÄÃ­tanÃ­
- âŒ **VÃ¤ÄÅ¡ie sÃºbory** - nekomprimovanÃ©

**Ako uloÅ¾iÅ¥ viac tabuliek?**

```{r ukladanie-viac-csv, eval=FALSE}
# RieÅ¡enie 1: Viac sÃºborov
write_csv(txhousing, file.path(tempdir(), "txhousing.csv"))
write_csv(tec00001, file.path(tempdir(), "tec00001.csv"))
write_csv(experiment, file.path(tempdir(), "experiment.csv"))

# RieÅ¡enie 2: PouÅ¾i .RData alebo .rds (lepÅ¡ie)
save(txhousing, tec00001, experiment, file = "results.RData")
```

---

# RDS - Ukladanie jednotlivÃ½ch objektov

RDS je binÃ¡rny formÃ¡t pre **jeden objekt** R. Na rozdiel od .RData, pri naÄÃ­tanÃ­ RDS **ty rozhodujeÅ¡** do akej premennej sa objekt naÄÃ­ta.

---

## Ãšloha 1: Ukladanie a naÄÃ­tanie RDS

**Zadanie:** UloÅ¾ tabuÄ¾ku `txhousing` do sÃºboru typu RDS a naÄÃ­taj ju spÃ¤Å¥ do prostredia R.

### RieÅ¡enie

```{r ukladanie-rds}
library(readr)

fp <- file.path(tempdir(), "txhousing.rds")

# SpÃ´sob 1: ZÃ¡pis do NEkomprimovanÃ©ho sÃºboru
# write_rds(txhousing, file = fp)

# SpÃ´sob 2: ZÃ¡pis do komprimovanÃ©ho sÃºboru (ODPORÃšÄŒANÃ‰)
write_rds(txhousing, file = fp, compress = "bz2")

# NaÄÃ­tanie dÃ¡t z RDS
# DÃ”LEÅ½ITÃ‰: TY rozhodujeÅ¡ do akej premennej sa to naÄÃ­ta!
txhousing_loaded <- read_rds(fp)

# Alebo prepÃ­Å¡ originÃ¡l
txhousing <- read_rds(fp)

# Overenie veÄ¾kosti sÃºboru
file.info(fp)$size / 1024  # veÄ¾kosÅ¥ v KB
```

**Typy kompresie:**

| Kompresia | RÃ½chlosÅ¥ | VeÄ¾kosÅ¥ sÃºboru | OdporÃºÄanie |
|-----------|----------|----------------|-------------|
| `"none"` | NajrÃ½chlejÅ¡ia | NajvÃ¤ÄÅ¡Ã­ | Pre doÄasnÃ© sÃºbory |
| `"gzip"` | StrednÃ¡ | StrednÃ¡ | DobrÃ½ kompromis |
| `"bz2"` | NajpomalÅ¡ia | NajmenÅ¡Ã­ | Pre archivÃ¡ciu |
| `"xz"` | PomalÃ¡ | VeÄ¾mi malÃ½ | AlternatÃ­va k bz2 |

---

## Ãšloha 2: Ukladanie viacerÃ½ch objektov do RDS

**Zadanie:** UloÅ¾ tabuÄ¾ky `txhousing`, `tec00001` a `experiment` do sÃºboru typu RDS a naÄÃ­taj ich do prostredia R.

**ProblÃ©m:** RDS mÃ´Å¾e obsahovaÅ¥ len **jeden objekt**!

**RieÅ¡enie:** Viac objektov musÃ­me spojiÅ¥ do **zoznamu** (list).

### RieÅ¡enie

```{r ukladanie-viac-rds}
fp <- file.path(tempdir(), "results.rds")

# UloÅ¾enie dÃ¡t: spojÃ­me do pomenovanÃ©ho zoznamu
write_rds(
  list(
    txhousing = txhousing,
    tec00001 = tec00001,
    experiment = experiment
  ),
  file = fp,
  compress = "bz2"
)

# NaÄÃ­tanie dÃ¡t: naÄÃ­tame ako zoznam
results <- read_rds(fp)

# Vybalenie zo zoznamu - prÃ­stup cez $
txhousing_loaded <- results$txhousing
tec00001_loaded <- results$tec00001
experiment_loaded <- results$experiment

# VyÄistenie - uÅ¾ nepotrebujeme zoznam
rm(results)

# Overenie
ls()
```

**Porovnanie .RData vs .RDS:**

| VlastnosÅ¥ | .RData | .RDS |
|-----------|--------|------|
| PoÄet objektov | Viacero | Jeden (alebo list) |
| NÃ¡zov premennej | FixnÃ½ (z `save()`) | VoÄ¾nÃ½ (pri `read_rds()`) |
| NaÄÃ­tanie | `load()` - automaticky | `read_rds()` - priradÃ­Å¡ |
| Kompresia | Ãno | Ãno, voliteÄ¾nÃ¡ |
| PouÅ¾itie | Viacero tabuliek | Jedna tabuÄ¾ka/objekt |

**Kedy pouÅ¾iÅ¥ Äo?**

- âœ… **.RData** - viacero sÃºvisiacich objektov (projekt, analÃ½za)
- âœ… **.RDS** - jeden hlavnÃ½ objekt (vÃ½sledok modelu, veÄ¾kÃ¡ tabuÄ¾ka)
- âœ… **.csv** - zdieÄ¾anie dÃ¡t s Ä¾uÄmi mimo R

---

# Trocha Äiernej mÃ¡gie na zÃ¡vÄ›r

TÃ¡to sekcia pokrÃ½va Å¡peciÃ¡lne formÃ¡ty ako SPSS a prÃ¡cu s labelmi.

---

## Ãšloha 1: NaÄÃ­tanie SPSS sÃºboru

**Zadanie:** NaÄÃ­taj dÃ¡ta *Annual national accounts* stiahnutÃ© z Eurostatu vo formÃ¡te SPSS. DÃ¡tovÃ½ sÃºbor sa volÃ¡ "nama_10_gdp.sav".

**SPSS (.sav)** je formÃ¡t Å¡tatistickÃ©ho softvÃ©ru SPSS. Obsahuje **labely** - popisky hodnÃ´t.

### RieÅ¡enie

```{r nacitanie-spss, eval=FALSE}
library(haven)

# NaÄÃ­tanie SPSS sÃºboru
nataccounts <- read_spss("nama_10_gdp.sav")

nataccounts
```

**VÃ½stup:**
```
# A tibble: 1,350 Ã— 6
   TIME        GEO                   UNIT       NA_ITEM    value FLAGS_FOOTNOTES
   <chr+lbl>   <chr+lbl>             <chr+lbl>  <chr+lbl>  <chr> <chr+lbl>      
 1 2007 [2007] EU28 [European Unionâ€¦ CLVâ€¦ [Chaâ€¦ B1GQ [Groâ€¦ 101.9 ""             
 2 2007 [2007] EU28 [European Unionâ€¦ CP_â€¦ [Curâ€¦ B1GQ [Groâ€¦ 1298â€¦ ""
```

**ÄŒo je `<chr+lbl>`?**

- **chr** = character (text)
- **lbl** = label (popisok)
- Hodnota "2007" mÃ¡ popisok "[2007]"
- Hodnota "EU28" mÃ¡ popisok "[European Union (28 countries)]"

**BalÃ­k haven:**

BalÃ­k **haven** slÃºÅ¾i na naÄÃ­tanie dÃ¡t z Å¡tatistickÃ½ch programov:

- `read_spss()` - SPSS (.sav, .por)
- `read_stata()` - Stata (.dta)
- `read_sas()` - SAS (.sas7bdat, .sas7bcat)

---

## Ãšloha 2: PrÃ¡ca s labelmi

**Zadanie:** PremennÃ© `TIME` a `GEO` obsahujÃº popisky. OdstrÃ¡Åˆ ich tak, Å¾e ich u premennej `TIME` zahodÃ­Å¡ a premennÃº `GEO` preveÄ na faktor.

### RieÅ¡enie

```{r prace-s-labelmi, eval=FALSE}
library(haven)

# NaÄÃ­tame dÃ¡ta
nataccounts <- read_spss("nama_10_gdp.sav")

# OdstrÃ¡nenie labelov z TIME - zostane len hodnota
nataccounts$TIME <- zap_labels(nataccounts$TIME)

# Konverzia GEO na faktor - pouÅ¾ije labely ako Ãºrovne faktoru
nataccounts$GEO <- as_factor(nataccounts$GEO)

nataccounts
```

**VÃ½stup:**
```
# A tibble: 1,350 Ã— 6
   TIME  GEO                         UNIT       NA_ITEM    value FLAGS_FOOTNOTES
   <chr> <fct>                       <chr+lbl>  <chr+lbl>  <chr> <chr+lbl>      
 1 2007  European Union (28 countriâ€¦ CLVâ€¦ [Chaâ€¦ B1GQ [Groâ€¦ 101.9 ""             
 2 2007  European Union (28 countriâ€¦ CP_â€¦ [Curâ€¦ B1GQ [Groâ€¦ 1298â€¦ ""
```

**Funkcie na prÃ¡cu s labelmi:**

| Funkcia | ÃšÄel |
|---------|------|
| `zap_labels()` | OdstrÃ¡ni labely, zostane len hodnota |
| `as_factor()` | Konvertuje na faktor, pouÅ¾ije labely ako Ãºrovne |
| `zap_label()` | OdstrÃ¡ni len popisok premennej (nie hodnÃ´t) |
| `as_character()` | Konvertuje na text, pouÅ¾ije labely |

### PrÃ­klad rozdielov

```{r labely-priklad, eval=FALSE}
# OriginÃ¡l
nataccounts$GEO
# <chr+lbl> "EU28" [European Union (28 countries)]

# Po zap_labels()
zap_labels(nataccounts$GEO)
# <chr> "EU28"

# Po as_factor()
as_factor(nataccounts$GEO)
# <fct> European Union (28 countries)
```

**Kedy pouÅ¾iÅ¥ Äo?**

- **`zap_labels()`** - chceÅ¡ len kÃ³dy (EU28, CZ, SK)
- **`as_factor()`** - chceÅ¡ popisnÃ© nÃ¡zvy ako faktor (pre grafy, tabuÄ¾ky)
- **`as_character()`** - chceÅ¡ popisnÃ© nÃ¡zvy ako text

---

# Zhrnutie dÃ´leÅ¾itÃ½ch konceptov

## Funkcie na naÄÃ­tanie a ukladanie dÃ¡t

| Funkcia | ÃšÄel | BalÃ­k |
|---------|------|-------|
| `load()` | NaÄÃ­tanie .RData sÃºborov | base R |
| `save()` | UloÅ¾enie do .RData (viac objektov) | base R |
| `read_rds()` | NaÄÃ­tanie .rds sÃºborov (jeden objekt) | readr |
| `write_rds()` | UloÅ¾enie do .rds | readr |
| `read_csv()` | CSV sÃºbory (Äiarka) | readr |
| `write_csv()` | ZÃ¡pis do CSV | readr |
| `read_tsv()` | TSV sÃºbory (tabulÃ¡tor) | readr |
| `write_tsv()` | ZÃ¡pis do TSV | readr |
| `read_delim()` | VlastnÃ½ oddeÄ¾ovaÄ | readr |
| `write_delim()` | ZÃ¡pis s vlastnÃ½m oddeÄ¾ovaÄom | readr |
| `read_excel()` | Excel sÃºbory | readxl |
| `read_lines()` | SurovÃ½ text | readr |
| `guess_encoding()` | Odhaduje kÃ³dovanie sÃºboru | readr |
| `read_spss()` | SPSS sÃºbory (.sav) | haven |
| `read_stata()` | Stata sÃºbory (.dta) | haven |
| `read_sas()` | SAS sÃºbory | haven |
| `zap_labels()` | OdstrÃ¡ni labely z hodnÃ´t | haven |
| `as_factor()` | Konvertuje na faktor (pouÅ¾ije labely) | haven |

## ÄŒasto pouÅ¾Ã­vanÃ© parametre

```{r parametre-tabulka, echo=FALSE}
library(knitr)

parametre <- data.frame(
  Parameter = c("col_types", "na", "skip", "col_names", "locale", "delim", "range", "trim_ws", "encoding"),
  Popis = c(
    "Definuje typy stÄºpcov",
    "Definuje hodnotu pre chÃ½bajÃºce dÃ¡ta",
    "PoÄet riadkov na preskoÄenie",
    "ManuÃ¡lne nÃ¡zvy stÄºpcov alebo FALSE",
    "Nastavenie jazyka/formÃ¡tu (desatinnÃ¡ Äiarka)",
    "OddeÄ¾ovaÄ hodnot",
    "Rozsah buniek (Excel)",
    "OdstrÃ¡nenie medzier",
    "KÃ³dovanie znakov (v locale)"
  ),
  Priklad = c(
    'cols(x = col_integer())',
    'na = ":"',
    'skip = 8',
    'col_names = c("a", "b")',
    'locale(decimal_mark = ",")',
    'delim = ":"',
    'range = "A4:Y47"',
    'trim_ws = TRUE',
    'locale(encoding = "ISO-8859-2")'
  )
)

kable(parametre, caption = "ÄŒasto pouÅ¾Ã­vanÃ© parametre pri naÄÃ­tavanÃ­ dÃ¡t")
```

## Typy stÄºpcov (col_types)

- **`col_character()`** - text
- **`col_integer()`** - celÃ© ÄÃ­slo
- **`col_double()`** - desatinnÃ© ÄÃ­slo
- **`col_number()`** - ÄÃ­slo s flexibilnÃ½m formÃ¡tom
- **`col_date(format = "...")`** - dÃ¡tum
- **`col_factor(levels = c(...))`** - faktor
- **`col_skip()`** - preskoÄ stÄºpec

### SkrÃ¡tenÃ¡ notÃ¡cia

```r
col_types = "cin"  # character, integer, number
col_types = "cnnnnnn"  # character + 6x number
```

## Best practices

1. **VÅ¾dy si najprv pozri surovÃ½ sÃºbor** pomocou `read_lines()`
2. **Explicitne definuj typy stÄºpcov** pomocou `col_types`
3. **Kontroluj problÃ©my** pomocou `problems()`
4. **Skontroluj kÃ³dovanie** pomocou `guess_encoding()` ak mÃ¡Å¡ diakritiku
5. **PouÅ¾Ã­vaj tibble** (vÃ½stup z readr) namiesto data.frame
6. **Pre Excel sÃºbory** pouÅ¾Ã­vaj balÃ­k **readxl** (nie **xlsx**)
7. **DÃ¡vaj pozor na locale** - desatinnÃ¡ Äiarka vs. bodka!
8. **VÅ¾dy kontroluj integritu** - `nrow()`, `head()`, `tail()`, `summary()`
9. **Pre ukladanie viacerÃ½ch objektov** pouÅ¾i `.RData`, pre jeden objekt `.rds`
10. **PouÅ¾Ã­vaj doÄasnÃ½ adresÃ¡r** `tempdir()` pre testovacie sÃºbory
11. **Komprimuj veÄ¾kÃ© sÃºbory** - `compress = "bz2"` v `write_rds()`
12. **Pre SPSS/Stata/SAS** pouÅ¾Ã­vaj balÃ­k **haven**
13. **CSV je univerzÃ¡lny**, ale strÃ¡ca dÃ¡tovÃ© typy a labely
14. **.RDS zachovÃ¡va vÅ¡etko** - dÃ¡tovÃ© typy, faktory, atribÃºty

## KÃ³dovanie znakov (Character encoding)

Pri prÃ¡ci s diakritikou je dÃ´leÅ¾itÃ© sprÃ¡vne nastaviÅ¥ kÃ³dovanie!

```{r kodovanie-tabulka, echo=FALSE}
library(knitr)

kodovanie_df <- data.frame(
  Kodovanie = c("UTF-8", "ISO-8859-2", "Windows-1250", "CP852"),
  Pouzitie = c(
    "ModernÃ© sÃºbory, internet (ODPORÃšÄŒANÃ‰)",
    "StarÅ¡ie Linux systÃ©my, Eurostat",
    "StarÅ¡ie Windows sÃºbory",
    "StarÃ© DOS sÃºbory"
  ),
  Jazyky = c(
    "VÅ¡etky jazyky sveta",
    "StredoeurÃ³pske jazyky (CZ, SK, PL, HU)",
    "StredoeurÃ³pske jazyky (CZ, SK, PL, HU)",
    "StredoeurÃ³pske jazyky"
  ),
  Poznamka = c(
    "âœ… VÅ¾dy preferuj tento formÃ¡t",
    "ÄŒastÃ© v EU dÃ¡tach",
    "ÄŒastÃ© v starÅ¡Ã­ch Excel sÃºboroch",
    "UÅ¾ zastaralÃ©"
  )
)

kable(kodovanie_df, caption = "PrehÄ¾ad kÃ³dovanÃ­ pouÅ¾Ã­vanÃ½ch v ÄŒR a SR")
```

**Ako poznaÅ¥ problÃ©m s kÃ³dovanÃ­m?**

- Namiesto **Ä** vidÃ­Å¡ **Ã„**
- Namiesto **Å¡** vidÃ­Å¡ **Ã…Â¡**
- Namiesto **Å¾** vidÃ­Å¡ **Ã…Â¾**
- Namiesto **Ã¡** vidÃ­Å¡ **ÃƒÂ¡**

**RieÅ¡enie:**

```r
# 1. UrÄi kÃ³dovanie
guess_encoding("subor.csv")

# 2. NaÄÃ­taj s sprÃ¡vnym kÃ³dovanÃ­m
read_csv("subor.csv", locale = locale(encoding = "ISO-8859-2"))
```

## Porovnanie formÃ¡tov sÃºborov

```{r formaty-tabulka, echo=FALSE}
library(knitr)

formaty_df <- data.frame(
  Format = c(".RData", ".rds", ".csv", ".xlsx", ".sav/.dta"),
  'PoÄet_objektov' = c("Viacero", "Jeden", "Jeden", "Viacero listov", "Jeden"),
  'ZachovÃ¡va_typy' = c("âœ… Ãno", "âœ… Ãno", "âŒ Nie", "âš ï¸ ÄŒiastoÄne", "âœ… Ãno + labely"),
  Kompresia = c("âœ… Ãno", "âœ… Ãno", "âŒ Nie (ale .gz)", "âœ… Ãno", "âœ… Ãno"),
  'ÄŒitateÄ¾nosÅ¥' = c("âŒ BinÃ¡rny", "âŒ BinÃ¡rny", "âœ… Text", "âŒ BinÃ¡rny", "âŒ BinÃ¡rny"),
  'UniverzÃ¡lnosÅ¥' = c("Jen R", "Jen R", "âœ… VÅ¡ade", "âœ… VÅ¡ade", "SPSS/Stata/SAS + R"),
  PouÅ¾itie = c(
    "Projekt, analÃ½za",
    "Jeden vÃ½sledok",
    "ZdieÄ¾anie",
    "Excel tabulky",
    "Å tat. programy"
  )
)

kable(formaty_df, 
      col.names = c("FormÃ¡t", "PoÄet objektov", "ZachovÃ¡va typy", "Kompresia", 
                    "ÄŒitateÄ¾nosÅ¥", "UniverzÃ¡lnosÅ¥", "PouÅ¾itie"),
      caption = "Porovnanie formÃ¡tov na ukladanie dÃ¡t")
```

### RozhodovacÃ­ strom - akÃ½ formÃ¡t pouÅ¾iÅ¥?

```
PotrebujeÅ¡ zdieÄ¾aÅ¥ dÃ¡ta s niekÃ½m mimo R?
â”œâ”€ ÃNO â†’ .csv alebo .xlsx
â””â”€ NIE â†’ PokraÄuj Äalej
         â”‚
         UkladÃ¡Å¡ viacero objektov naraz?
         â”œâ”€ ÃNO â†’ .RData
         â””â”€ NIE â†’ .rds (s kompresiou)
```

---

# DodatoÄnÃ© zdroje

## DokumentÃ¡cia

- **Kapitola 10**: NaÄÃ­tÃ¡nÃ­ a uklÃ¡dÃ¡nÃ­ dat ze souborÅ¯  
  https://aved.econ.muni.cz/reading_and_writing_data_from_files.html

- **DokumentÃ¡cia readr** (CSV, TSV, RDS):  
  https://readr.tidyverse.org/

- **DokumentÃ¡cia readxl** (Excel):  
  https://readxl.tidyverse.org/

- **DokumentÃ¡cia haven** (SPSS, Stata, SAS):  
  https://haven.tidyverse.org/

## UÅ¾itoÄnÃ© cheatsheets

- **Data Import Cheat Sheet**:  
  https://github.com/rstudio/cheatsheets/blob/main/data-import.pdf

## Eurostat API

- **BalÃ­k eurostat**:  
  https://ropengov.github.io/eurostat/

```r
# Priame naÄÃ­tanie z Eurostatu
install.packages("eurostat")
library(eurostat)
tec00001 <- get_eurostat("tec00001")
```

---

# Zhrnutie cviÄenia

V tomto cviÄenÃ­ si sa nauÄil/a:

âœ… **NaÄÃ­taÅ¥ dÃ¡ta** z rÃ´znych formÃ¡tov (.RData, .csv, .tsv, .xlsx, .sav)  
âœ… **RieÅ¡iÅ¥ problÃ©my** s kÃ³dovanÃ­m, oddeÄ¾ovaÄmi, hlaviÄkami  
âœ… **KontrolovaÅ¥ integritu** naÄÃ­tanÃ½ch dÃ¡t  
âœ… **UkladaÅ¥ dÃ¡ta** do rÃ´znych formÃ¡tov  
âœ… **RozhodovaÅ¥** ktorÃ½ formÃ¡t je najvhodnejÅ¡Ã­  
âœ… **PracovaÅ¥ s labelmi** v SPSS sÃºboroch  

**KÄ¾ÃºÄovÃ© poznatky:**

- ğŸ“Œ VÅ¾dy zaÄni s `read_lines()` - pozri si surovÃ½ sÃºbor
- ğŸ“Œ Explicitne definuj `col_types` - predchÃ¡dzaj problÃ©mom
- ğŸ“Œ `.rds` je lepÅ¡Ã­ ako `.RData` pre jeden objekt
- ğŸ“Œ CSV je univerzÃ¡lny, ale strÃ¡ca dÃ¡tovÃ© typy
- ğŸ“Œ Kontroluj kÃ³dovanie pri dÃ¡tach s diakritikou


